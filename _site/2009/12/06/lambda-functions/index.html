<!DOCTYPE html>
<html>
  <head>
    <title>Lambda Functions - Zero Wind :: Jamie Wong</title>
    
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

    <link rel="stylesheet" media="screen" href="/stylesheets/screen.css" type="text/css" />
    <link rel="stylesheet" media="screen" href="/stylesheets/prettify.css" type="text/css" />
    <script type="text/javascript" src="/javascript/prettify.js"></script>

  </head>

  <body class="bp" onload="prettyPrint()">
    <div class="page-container">
      <div class="page-sidebar-container">
        <div class="page-sidebar">

          <div class="zero-wind">
            <a href="/"><h1 class="site-title">
              Zer√∏ Wind
            </h1></a>
          </div>

          <h2 class='my-name'>Jamie Wong</h2>

          <div class='short-bio'>
            <p>
              I'm a UWaterloo Software Engineering student from Ottawa.
              I'm currently an intern at Facebook.
            </p>
          </div>

          <div class="page-nav">
            <ul>
              <li><a href="/">blog</a></li>
              <li><a href="/resume/">resume</a></li>
              <li><a href="https://github.com/phleet">github</a></li>
              <li><a href="http://www.linkedin.com/profile/view?id=71283243">linkedin</a></li>
              <li><a href="http://stackoverflow.com/users/303911/jamie-wong">stack overflow</a></li>
            </ul>
          </div>
        </div>
      </div>

      <div class="page-content-container">
        <div class="page-content">
          
            <h1 class='page-title'>Lambda Functions</h1>
          

          
<div class="post-date">
  06 December 2009
</div>


<div class="post">
<p>One day, a friend of mine called me up asking for help with his CS assignment.
It was about lambda functions in scheme. Lambda functions had always been
something confusing both in theory and practice for me. Why do you need them?
Before I explain what they are, I'll start with a simple probably justifying
<em>why</em> they are.</p>

<p>All code in this post is going to be in python, but most of it can be applied to
other high level languages. I've only used lambda functions in python and
scheme, but I'm sure the functionality exists in many, many other languages.</p>

<h1>Sorting</h1>

<p>Sorting in python is very straight forward. If I have a list of strings in python and want to sort them, I do this:</p>

<pre><code>a = ["banana","apple","pear","elephant","zebra","mango"]
a.sort()
print a
# OUT: ['apple', 'banana', 'elephant', 'mango', 'pear', 'zebra']
</code></pre>

<p>But what happens when you try to sort a list of words containing capital letters?</p>

<pre><code>a = ["pear","Police","apple","Airplane","banana","Bear"]
a.sort()
print a
# OUT: ['Airplane', 'Bear', 'Police', 'apple', 'banana', 'pear']
</code></pre>

<p>The sorting is done purely based on the byte values of the characters. Since 'P'
(ASCII 80) &lt; 'a' (ASCII 97), "Police" is placed before "apple" in the list of
words. Normally when you're trying to sort a list of words, you want to do it
alphabetically. So how do you fix this? You make a comparator function. Here's
python's definition of the sort function.</p>

<pre><code>L.sort(cmp=None, key=None, reverse=False) -- stable sort *IN PLACE*;
cmp(x, y) -&gt; -1, 0, 1
</code></pre>

<p>For those of you who have used <code>qsort</code> in the standard C library, this isn't
such an arcane concept. In python however, it is much easier (no <code>void*</code>
madness).</p>

<pre><code>def alphacmp(x,y):
    return cmp(x.lower(),y.lower())

a = ["pear","Police","apple","Airplane","banana","Bear"]
a.sort(alphacmp)
print a
# OUT: ['Airplane', 'apple', 'banana', 'Bear', 'pear', 'Police']
</code></pre>

<p>Okay, great! We now have our list sorted in the intuitive way. The lower()
function will ensure that the lowercase version of the strings are being
compared, removing the issues of the byte comparisons. But this code seems a
little longer than it could be. Normally, you wouldn't create a function for
task you do only once if it was just as readable within the code body. But the
sort function needs a comparator function. So how can you give sort a comparator
function without having to actually declare a function? The answer is lambda
functions.</p>

<h1>Lambda Functions</h1>

<p>Lambda functions are anonymous functions. What does that mean? They're functions
without a declared name. Let's look at an example so you can see what I mean. In
the above example, we can sort alphabetically without defining the <code>alphacmp</code>
function like so:</p>

<pre><code>a = ["pear","Police","apple","Airplane","banana","Bear"]
a.sort(lambda x,y: cmp(x.lower(),y.lower()))
print a
# OUT: ['Airplane', 'apple', 'banana', 'Bear', 'pear', 'Police'] 
</code></pre>

<p>So what does lambda x,y: cmp(x.lower(),y.lower()) mean? "lambda" says that the
statements following define an anonymous function. "x,y:" defines the parameter
list accepted by the anonymous function. "cmp(x.lower(),y.lower())" defines the
return value for the lambda function. If you're still a little bit confused,
read on for many many more examples. At some point, it will likely click and
you'll see how valuable lambda really is.</p>

<p>Another sorting example: what if I want to sort by length of the strings instead of alphabetically? Easily done with lambda.</p>

<pre><code>a = ["pencil","pen","cap","zebra","Blizzard","0xB4DC0DE","!"]
a.sort(lambda x,y: len(x) - len(y))
print a
# OUT: ['!', 'pen', 'cap', 'zebra', 'pencil', 'Blizzard', '0xB4DC0DE']
</code></pre>

<p>The use of lambda functions makes the use of many higher level functions much nicer. I'll be outlining a few of them here.</p>

<h1>map</h1>

<blockquote><p>  map(function, sequence[, sequence, ...]) -> list</p>

<p>  Return a list of the results of applying the function to the items of
  the argument sequence(s).  If more than one sequence is given, the
  function is called with an argument list consisting of the corresponding
  item of each sequence, substituting None for missing values when not all
  sequences have the same length.  If the function is None, return a list of
  the items of the sequence (or a list of tuples if more than one sequence).</p></blockquote>

<p>More or less, what map does is apply a function on every element of an array
then return an array of the corresponding return values.</p>

<p>A very simple use for map would be making every word in a list upper case.</p>

<pre><code>a = ["abc","cattle","not even if there's a FIRE","Jeymi!?"]
b = map(lambda x: x.upper(),a)
print b
# OUT: ['ABC', 'CATTLE', "NOT EVEN IF THERE'S A FIRE", 'JEYMI!?']
</code></pre>

<p>A more useful example involves printing out grids. Say I have a matrix of
numbers, represented as a list of lists in python. The default output formatting
for this in python is extremely difficult to look at.</p>

<pre><code>a = [
    [1,212,-13],
    [41,5,614],
    [7,8,91]
]
print a
# OUT: [[1, 212, -13], [41, 5, 614], [7, 8, 91]]
</code></pre>

<p>What would be better is to output one row per line.</p>

<pre><code>a = [
    [1,212,-13],
    [41,5,614],
    [7,8,91]
]
print "\n".join(map(lambda x: str(x), a))
#OUT:
# [1, 212, -13]
# [41, 5, 614]
# [7, 8, 91]
</code></pre>

<p><em>The join function concatenates a list of string, separating the elements with
the separator character - in this case: "\n"</em></p>

<p>Much better! But what would be even better would be to print out the numbers in
columns that line up nicely too.</p>

<pre><code>a = [
    [1,212,-13],
    [41,5,614],
    [7,8,91]
]
print "\n".join(
    map(
        lambda row:
            " ".join(map(
                lambda y: "%4d" % y,
                row
            )),
        a
    )
)
# OUT:
#   1  212  -13
#  41    5  614
#   7    8   91
</code></pre>

<p><code>"%4d" % y</code> is applying the formatting string <code>%4d</code> to <code>y</code>, much the same way
that <code>printf</code> in C and php do</p>

<p>Now, using a lambda function inside of a lambda function is less than readable,
so I'll write out what this function does first without the maps and lambdas.</p>

<pre><code>a = [
    [1,212,-13],
    [41,5,614],
    [7,8,91]
]

def rowformat(row):
    formatted_cells = []
    for element in row:
        formatted_cells.append("%4d" % element)
    return " ".join(formatted_cells)

formatted_rows = []
for row in a:
    formatted_rows.append(rowformat(row))

print "\n".join(formatted_rows)
# OUT:
#   1  212  -13
#  41    5  614
#   7    8   91
</code></pre>

<p>In this case, <code>rowformat(row)</code> plays the exact same roles as <code>lambda row:</code>.</p>

<h1>filter</h1>

<blockquote><p>  filter(function or None, sequence) -> list, tuple, or string</p>

<p>  Return those items of sequence for which function(item) is true.  If
  function is None, return the items that are true.  If sequence is a tuple
  or string, return the same type, else return a list.</p></blockquote>

<p>The filter function does just what it's name suggests: filters out items that
don't meet certain requirements. Specifically, any element which does not
evaluate to true when passed to the provided function will be discarded. Note
that this is <em>not</em> in place - it returns the filtered list.</p>

<p>Example: remove all odd numbers from a list of numbers</p>

<pre><code>a = [1,2,5,0,-15,100,1400,-1337,135]
a = filter(lambda x: x % 2 == 0, a)
print a
# OUT: [2, 0, 100, 1400]
</code></pre>

<p>Example: remove all vowels from a string</p>

<pre><code>a = "Hello there! My name is Jamie, not to be confused with Jeymi."
a = "".join(filter(lambda x: "aeiou".find(x) == -1, list(a)))
print a
# OUT: Hll thr! My nm s Jm, nt t b cnfsd wth Jym.
</code></pre>

<p>Example: build a list of all prime numbers between 0 and 100 inclusive</p>

<pre><code># NOTE: This prime test is inefficient - used for readability)
def isprime(x):
    if (x &lt; 2):
        return False
    for i in range(2,x):
        if (x % i == 0):
            return False
    return True

print filter(isprime,range(101))
# OUT (placed on multiple lines for readability)
# [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 
# 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97]
</code></pre>

<h1>reduce</h1>

<blockquote><p>  reduce(function, sequence[, initial]) -> value</p>

<p>  Apply a function of two arguments cumulatively to the items of a sequence,
  from left to right, so as to reduce the sequence to a single value.
  For example, reduce(lambda x, y: x+y, [1, 2, 3, 4, 5]) calculates
  ((((1+2)+3)+4)+5).  If initial is present, it is placed before the items
  of the sequence in the calculation, and serves as a default when the
  sequence is empty.</p></blockquote>

<p>Example: Calculate 30 factorial without using local variables</p>

<pre><code># Note that range(2,n) -&gt; [2,3,...,n-1]
print reduce(lambda x,y: x*y, range(2,31))
# OUT: 265252859812191058636308480000000
</code></pre>

<p>Example: Find the longest word in a list of words</p>

<pre><code>a = ["pencil","pen","cap","zebra","Blizzard","0xB4DC0DE","!"]
print reduce(lambda x,y: y if len(y) &gt; len(x) else x, a)
# OUT: 0xB4DC0DE 
</code></pre>

<p>And that's all for now. If you're in SE 2014 reading this and don't think you need to know how to use lambda functions - have fun with scheme.</p>

</div>

<div class="related post-list">
  <h2>Related Posts</h2>
  <ul class="post-list-ul">
    
      <li>
        <a href="/2011/06/25/complex-asynchronous-queries-in-javascript/">Complex Asynchronous Queries in JavaScript</a>
        <span class='date'>25 June 2011</span>
      </li>
    
      <li>
        <a href="/2011/01/12/hacker-cup-qualification-round-solutions/">Hacker Cup Qualification Round - Solutions</a>
        <span class='date'>12 January 2011</span>
      </li>
    
      <li>
        <a href="/2010/11/17/mechanize-and-uwace-downloader/">Mechanize and UWAce Downloader</a>
        <span class='date'>17 November 2010</span>
      </li>
    
      <li>
        <a href="/2010/10/16/dfas-and-graphviz-dot/">DFAs and Graphviz DOT</a>
        <span class='date'>16 October 2010</span>
      </li>
    
      <li>
        <a href="/2010/09/30/make-your-life-easier-with-gnu-make/">Make your life easier with GNU Make.</a>
        <span class='date'>30 September 2010</span>
      </li>
    
  </ul>
</div>


</div>

        </div>
      </div>
    </div>

    
    <!-- google analytics async -->
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(["_setAccount", "UA-11869199-1"]);
      _gaq.push(["_trackPageview"]);
      (function() {
        var ga = document.createElement("script"); ga.type = "text/javascript"; ga.async = true;
        ga.src = ("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js";
        var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    
  </body>
</html>
