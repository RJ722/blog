<!DOCTYPE html>
<html>
  <head>
    <title>Flex/Actionscript 3: Debug Output to Console - Zero Wind :: Jamie Wong</title>
    
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

    <link href='http://fonts.googleapis.com/css?family=Questrial|Sansita+One' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" media="screen" href="/stylesheets/screen.css" type="text/css" />
    <link rel="stylesheet" media="screen" href="/stylesheets/pygments.css" type="text/css" />
  </head>

  <body class="bp" onload="prettyPrint()">
    <div class="page-container">
      <div class="page-sidebar-container">
        <div class="page-sidebar">

          <a href="/"><h1 class="site-title">
            Zer√∏ Wind
          </h1></a>

          <h2 class='my-name'>Jamie Wong</h2>

          <div class='short-bio'>
            <p>
              I'm a uWaterloo Software Engineering student from Ottawa.
              I'm currently an intern at Facebook.
            </p>
          </div>

          <div class="page-nav">
            <ul>
              <li><a href="/">blog</a></li>
              <li><a href="/resume/">resume</a></li>
              <li><a href="https://github.com/phleet">github</a></li>
              <li><a href="http://twitter.com/jlfwong">twitter</a></li>
              <li><a href="http://www.linkedin.com/profile/view?id=71283243">linkedin</a></li>
              <li><a href="http://stackoverflow.com/users/303911/jamie-wong">stack overflow</a></li>
            </ul>
          </div>
        </div>
      </div>

      <div class="page-content-container">
        <div class="page-content">
          
            <h1 class='page-title'>Flex/Actionscript 3: Debug Output to Console</h1>
          

          
<div class="post-date">
  Posted on July  7, 2010
</div>


<div class="post">
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<p>I recently started messing around with the <a href="http://flixel.org/">Flixel</a> framework - something built on top of <a href="http://www.adobe.com/products/flex/">Flex</a> to make retro games. One of the first things I noticed was how difficult it is to debug things - especially complex objects.</p>

<p>The first problem is capturing <em>any</em> debug output. For whatever reason, I was unable to output traces to anywhere useful.
My first success was with using <a href="http://demonsterdebugger.com/">De MonsterDebugger</a> to capture the output. While this was better than nothing, I needed very little of the functionality of De MonsterDebugger and it still didn't give me what I really wanted: formatted console output.</p>

<h2>print_r style output in actionscript</h2>

<p>I found a good starting point <a href="http://dev.base86.com/solo/47/actionscript_3_equivalent_of_phps_printr.html">here</a>, but the output of this wasn't exactly what I wanted. I messed around with it until I got something more familiar to me.</p>

<div class="highlight">
<pre><span class="kd">package</span> <span class="nx">learning</span> <span class="p">{</span>
  <span class="kd">import</span> <span class="nx">org</span><span class="p">.</span><span class="nx">flixel</span><span class="p">.</span><span class="o">*;</span>

  <span class="kd">public</span> <span class="kd">class</span> <span class="nx">Debugger</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">function</span> <span class="nx">pr</span><span class="p">(</span><span class="nx">obj</span><span class="o">:*,</span> <span class="nx">level</span><span class="o">:</span><span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="nx">output</span><span class="o">:</span><span class="nb">String</span> <span class="o">=</span> <span class="s2">""</span><span class="p">)</span><span class="o">:*</span> <span class="p">{</span>
      <span class="k">var</span> <span class="nx">objtype</span><span class="o">:</span><span class="nb">String</span> <span class="o">=</span> <span class="k">typeof</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">objtype</span> <span class="o">==</span> <span class="s2">"boolean"</span> <span class="o">||</span> <span class="nx">objtype</span> <span class="o">==</span> <span class="s2">"string"</span> <span class="o">||</span> <span class="nx">objtype</span> <span class="o">==</span> <span class="s2">"number"</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">obj</span><span class="o">;</span>
      <span class="p">}</span>

      <span class="k">var</span> <span class="nx">tabs</span><span class="o">:</span><span class="nb">String</span> <span class="o">=</span> <span class="s2">""</span><span class="o">;</span>
      <span class="k">for</span><span class="p">(</span><span class="k">var</span> <span class="nx">i</span><span class="o">:</span><span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">level</span><span class="o">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">tabs</span> <span class="o">+=</span> <span class="s2">"\t"</span>
      <span class="p">}</span>

      <span class="nx">output</span> <span class="o">+=</span> <span class="s2">"{\n"</span><span class="o">;</span>
      <span class="k">for</span><span class="p">(</span><span class="k">var</span> <span class="nx">child</span><span class="o">:*</span> <span class="k">in</span> <span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">output</span> <span class="o">+=</span> <span class="nx">tabs</span> <span class="o">+</span><span class="s2">"\t["</span><span class="o">+</span> <span class="nx">child</span> <span class="o">+</span><span class="s2">"] =&gt; "</span><span class="o">;</span>

        <span class="k">var</span> <span class="nx">childOutput</span><span class="o">:</span><span class="nb">String</span> <span class="o">=</span> <span class="nx">pr</span><span class="p">(</span><span class="nx">obj</span><span class="p">[</span><span class="nx">child</span><span class="p">]</span><span class="o">,</span> <span class="nx">level</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">childOutput</span> <span class="o">!=</span> <span class="s1">''</span><span class="p">)</span> <span class="nx">output</span> <span class="o">+=</span> <span class="nx">childOutput</span>

        <span class="nx">output</span> <span class="o">+=</span> <span class="s2">"\n"</span><span class="o">;</span>
      <span class="p">}</span>
      <span class="nx">output</span> <span class="o">+=</span> <span class="nx">tabs</span> <span class="o">+</span> <span class="s2">"}\n"</span><span class="o">;</span>

      <span class="k">return</span> <span class="nx">output</span><span class="o">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">function</span> <span class="nx">log</span><span class="p">(</span><span class="nx">obj</span><span class="o">:*</span><span class="p">)</span><span class="o">:</span><span class="nx">void</span> <span class="p">{</span>
      <span class="nx">FlxG</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">pr</span><span class="p">(</span><span class="nx">obj</span><span class="p">));</span>
      <span class="c1">// This is a flixel thing. If you're not using flixel</span>
      <span class="c1">// Just use trace(pr(obj));</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre>
</div>


<p>Example output</p>

<pre><code>{
    [0] =&gt; {
        [tile] =&gt; 4
        [rule] =&gt; {
            [0] =&gt; xxx
            [1] =&gt; x1x
            [2] =&gt; x1x
        }
    }
    [1] =&gt; {
        [tile] =&gt; 8
        [rule] =&gt; {
            [0] =&gt; x1x
            [1] =&gt; x1x
            [2] =&gt; xxx
        }
    }
}
</code></pre>

<h2>trace output to console</h2>

<p>This, fortunately, was much less of a hassle for me to get working.</p>

<p>Reference: <a href="http://livedocs.adobe.com/flex/3/html/help.html?content=logging_04.html">Configuring the debugger version of Flash Player</a></p>

<p><strong>Step 1</strong></p>

<p>Locate/create your <code>mm.cfg</code> file. For me this was in <code>~/mm.cfg</code>. See <a href="http://livedocs.adobe.com/flex/3/html/help.html?content=logging_04.html">reference</a>.</p>

<p>Stick this in it: <code>TraceOutputFileEnable=1</code></p>

<p>Or, in one command:</p>

<div class="highlight">
<pre><span class="nb">echo</span> <span class="s2">"TraceOutputFileEnable=1"</span> &gt; ~/mm.cfg<span class="sb">`</span>
</pre>
</div>


<p><strong>Step 2</strong></p>

<p>Locate the location of the log file. Mine is in</p>

<pre><code>~/Library/Preferences/Macromedia/Flash Player/Logs/flashlog.txt`
</code></pre>

<p>See <a href="http://livedocs.adobe.com/flex/3/html/help.html?content=logging_04.html">reference</a>.</p>

<p>You don't want to type this in every time you want to view the log, so add a function to your <code>.bash_profile</code></p>

<p>This is what I have:</p>

<div class="highlight">
<pre>flashlog<span class="o">()</span> <span class="o">{</span>
  tail -f <span class="nv">$*</span> ~/Library/Preferences/Macromedia/Flash<span class="se">\ </span>Player/Logs/flashlog.txt;
<span class="o">}</span>
</pre>
</div>


<p><strong>Step 3</strong></p>

<p>Start debugging!</p>

<div class="highlight">
<pre><span class="nv">$ </span>flashlog -100
Warning: <span class="s1">'flash'</span> has no property <span class="s1">'prototype'</span>
Warning: <span class="s1">'flash'</span> has no property <span class="s1">'prototype'</span>
flixel v2.35 <span class="o">[</span>debug<span class="o">]</span>
----------------------------------------------------
<span class="o">{</span>
    <span class="o">[</span>0<span class="o">]</span> <span class="o">=</span>&gt; <span class="o">{</span>
        <span class="o">[</span>tile<span class="o">]</span> <span class="o">=</span>&gt; 4
        <span class="o">[</span>rule<span class="o">]</span> <span class="o">=</span>&gt; <span class="o">{</span>
            <span class="o">[</span>0<span class="o">]</span> <span class="o">=</span>&gt; xxx
            <span class="o">[</span>1<span class="o">]</span> <span class="o">=</span>&gt; x1x
            <span class="o">[</span>2<span class="o">]</span> <span class="o">=</span>&gt; x1x
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="o">[</span>1<span class="o">]</span> <span class="o">=</span>&gt; <span class="o">{</span>
        <span class="o">[</span>tile<span class="o">]</span> <span class="o">=</span>&gt; 8
        <span class="o">[</span>rule<span class="o">]</span> <span class="o">=</span>&gt; <span class="o">{</span>
            <span class="o">[</span>0<span class="o">]</span> <span class="o">=</span>&gt; x1x
            <span class="o">[</span>1<span class="o">]</span> <span class="o">=</span>&gt; x1x
            <span class="o">[</span>2<span class="o">]</span> <span class="o">=</span>&gt; xxx
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre>
</div>
</body></html>

</div>

<div class="related post-list">
  <h2>Related Posts</h2>
  <ul class="post-list-ul">
    
      <li>
        <a href="/2011/11/03/meet-doctor-jekyll/">Meet Doctor Jekyll</a>
        <span class='date'>03 November 2011</span>
      </li>
    
      <li>
        <a href="/2011/06/25/complex-asynchronous-queries-in-javascript/">Complex Asynchronous Queries in JavaScript</a>
        <span class='date'>25 June 2011</span>
      </li>
    
      <li>
        <a href="/2011/01/12/hacker-cup-qualification-round-solutions/">Hacker Cup Qualification Round - Solutions</a>
        <span class='date'>12 January 2011</span>
      </li>
    
      <li>
        <a href="/2010/11/17/mechanize-and-uwace-downloader/">Mechanize and UWAce Downloader</a>
        <span class='date'>17 November 2010</span>
      </li>
    
      <li>
        <a href="/2010/10/16/dfas-and-graphviz-dot/">DFAs and Graphviz DOT</a>
        <span class='date'>16 October 2010</span>
      </li>
    
  </ul>
</div>


</div>

        </div>
      </div>
    </div>

    
    <!-- google analytics async -->
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(["_setAccount", "UA-11869199-1"]);
      _gaq.push(["_trackPageview"]);
      (function() {
        var ga = document.createElement("script"); ga.type = "text/javascript"; ga.async = true;
        ga.src = ("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js";
        var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    
  </body>
</html>
