<!DOCTYPE html>
<html>
  <head>
    <title>Commandline Tips and Tricks - Zero Wind :: Jamie Wong</title>
    
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

    <link href='http://fonts.googleapis.com/css?family=Questrial|Sansita+One' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" media="screen" href="/stylesheets/screen.css" type="text/css" />
    <link rel="stylesheet" media="screen" href="/stylesheets/pygments.css" type="text/css" />
  </head>

  <body class="bp" onload="prettyPrint()">
    <div class="page-container">
      <div class="page-sidebar-container">
        <div class="page-sidebar">

          <a href="/"><h1 class="site-title">
            Zer√∏ Wind
          </h1></a>

          <h2 class='my-name'>Jamie Wong</h2>

          <div class='short-bio'>
            <p>
              I'm a uWaterloo Software Engineering student from Ottawa.
              I'm currently an intern at Facebook.
            </p>
          </div>

          <div class="page-nav">
            <ul>
              <li><a href="/">blog</a></li>
              <li><a href="/resume/">resume</a></li>
              <li><a href="https://github.com/phleet">github</a></li>
              <li><a href="http://twitter.com/jlfwong">twitter</a></li>
              <li><a href="http://www.linkedin.com/profile/view?id=71283243">linkedin</a></li>
              <li><a href="http://stackoverflow.com/users/303911/jamie-wong">stack overflow</a></li>
            </ul>
          </div>
        </div>
      </div>

      <div class="page-content-container">
        <div class="page-content">
          
            <h1 class='page-title'>Commandline Tips and Tricks</h1>
          

          
<div class="post-date">
  Posted on June 29, 2010
</div>


<div class="post">
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<p>Alas, I have been stricken with the plague of half-finished posts and projects. But, as I feel the need to have at least one post per month, here's some stuff you might find useful.</p>

<p>I forget where I discovered this, but <a href="http://www.commandlinefu.com/commands/browse/sort-by-votes">commandlinefu.com</a>
is an awesome site.</p>

<p>It's so awesome in fact, that I think the productivity gains I've gotten from it <strong>almost</strong> outweigh the time I wasted looking through the site and testing it.</p>

<p>Here are some of the more useful ones from the site and a few I learned at work and elsewhere.</p>

<h2>Change to previous working directory</h2>


<p>From: <a href="http://www.commandlinefu.com/commands/view/51/change-to-the-previous-working-directory">Change to the previous working directory @ commandlinefu.com</a></p>



<div class="highlight">
<pre><span class="nv">$ </span><span class="nb">pwd</span>
/Users/jamiewong/code/stackoverflow

<span class="nv">$ </span><span class="nb">cd</span> /usr/bin

<span class="nv">$ </span><span class="nb">pwd</span>
/usr/bin

<span class="nv">$ </span><span class="nb">cd</span> -
/Users/jamiewong/code/stackoverflow

<span class="nv">$ </span><span class="nb">pwd</span>
/Users/jamiewong/code/stackoverflow
</pre>
</div>


<h2>Rerun the last command</h2>


<p>From: <a href="http://www.commandlinefu.com/commands/view/1189/run-the-previous-command-with-sudo">Run the previous command with sudo @ commandlinefu.com</a></p>

<div class="highlight">
<pre><span class="nv">$ </span><span class="nb">echo </span>hello
hello

<span class="nv">$ </span>!!
<span class="nb">echo </span>hello
hello

<span class="nv">$ </span>ln -s some_script.sh /usr/bin/some_script
ln: /usr/bin/some_script: Permission denied

<span class="nv">$ </span>sudo !!
sudo ln -s some_script.sh /usr/bin/some_script

<span class="nv">$ </span>ls -l /usr/bin/some_script
lrwxr-xr-x  1 root  wheel  14 30 Jun 00:44 /usr/bin/some_script -&gt; some_script.sh

<span class="nv">$ </span>cat /etc/apache2/passenger_pane_vhosts/searchgraph*
&lt;VirtualHost *:80&gt;
  ServerName searchgraph.local
  DocumentRoot <span class="s2">"/Users/jamiewong/Code/searchgraph/public"</span>
  RailsEnv development
  &lt;Directory <span class="s2">"/Users/jamiewong/Code/searchgraph/public"</span>&gt;
    Order allow,deny
    Allow from all
  &lt;/Directory&gt;
&lt;/VirtualHost&gt;

<span class="nv">$ </span><span class="nb">echo</span> <span class="s2">"!!"</span>
<span class="nb">echo</span> <span class="s2">"cat /etc/apache2/passenger_pane_vhosts/searchgraph*"</span>;
cat /etc/apache2/passenger_pane_vhosts/searchgraph.local.vhost.conf
</pre>
</div>


<h2>Modify the last command and run it</h2>


<p>From: <a href="http://www.commandlinefu.com/commands/view/19/runs-previous-command-but-replacing">Runs the previous command but replacing @ commandlinefu.com</a></p>

<div class="highlight">
<pre><span class="nv">$ </span><span class="nb">echo </span>hello world
hello world

<span class="nv">$ </span>^world^friends
<span class="nb">echo </span>hello friends
hello friends

<span class="nv">$ </span>ls *.php
bolding.php shd.php     stream.php

<span class="nv">$ </span>^php^rb
ls *.rb
hms.rb           split_orderby.rb
&lt;/pre&gt;&lt;pre <span class="nv">class</span><span class="o">=</span><span class="s2">"cmd"</span>&gt;
<span class="nv">$ </span>cds ..
-bash: cds: <span class="nb">command </span>not found

<span class="nv">$ </span>^s
<span class="nb">cd</span> ..
</pre>
</div>


<h2>List your last n commands</h2>


<div class="highlight">
<pre><span class="nv">$ </span><span class="nb">history </span>10
 522  locate mysqld
 523  sudo /Library/StartupItems/MySQLCOM/MySQLCOM start
 524  sudo /Library/PreferencePanes/MySQL.prefPane/Contents/MacOS/MySQL
 525  sudo mysqld_safe
 526  sudo /usr/local/mysql/bin/mysqld_safe
 527  mysql
 528  <span class="nb">history</span>
<span class="nb"> </span>529  <span class="nb">history</span> | awk <span class="s1">'{a[$2]++}END{for(i in a){print a[i] " " i}}'</span> | sort -rn | head
 530  <span class="nb">history</span>
<span class="nb"> </span>531  <span class="nb">history </span>10
</pre>
</div>


<h2>Edit and run a previous command</h2>


<p>From: <a href="http://www.commandlinefu.com/commands/view/1561/edit-the-last-or-previous-command-line-in-an-editor-then-execute">Edit the last command line in an editor then execute @ commandlinefu.com</a></p>

<p>This one requires a bit of explanation. The <code>fc</code> command will, by default, open
your last command in the console editor you specify (emacs by default).<br>
If you want it to be vim, stick this in your <code>.bash_profile</code> to just run
it when you want to use it.</p>

<div class="highlight">
<pre><span class="nb">export </span><span class="nv">EDITOR</span><span class="o">=</span>vim
</pre>
</div>


<p>Then run <code>fc</code>, and it will open up your editor with your last command in it.
Save and exit (<code>:wq</code>) to run that command.
If you just want to execute it immediately, use <code>fc -s</code>.</p>

<div class="highlight">
<pre><span class="nv">$ </span><span class="nb">history </span>5
  86  cat /etc/apache2/passenger_pane_vhosts/searchgraph.local.vhost.conf
  87  <span class="nb">echo</span> <span class="s2">"cat /etc/apache2/passenger_pane_vhosts/searchgraph.local.vhost.conf "</span>
  88  <span class="nb">history </span>10
  89  <span class="nb">echo</span> <span class="s2">"cat /etc/apache2/passenger_pane_vhosts/searchgraph.local.vhost.conf "</span>
  90  <span class="nb">history </span>5

<span class="nv">$ </span><span class="nb">fc</span> -s 87
<span class="nb">echo</span> <span class="s2">"cat /etc/apache2/passenger_pane_vhosts/searchgraph.local.vhost.conf "</span>
cat /etc/apache2/passenger_pane_vhosts/searchgraph.local.vhost.conf
</pre>
</div>


<p>If you don't care to look up the history number but happen to remember that it
was the command you executed two lines ago, you can use negative history numbers</p>

<pre><code>$ echo hello
hello

$ echo world
world

$ fc -s -2
echo hello
hello
</code></pre>

<h2>Follow new output to a log</h2>


<p>This one comes from my coworkers</p>

<div class="highlight">
<pre><span class="nv">$ </span>tail -f ~/code/searchgraph/log/development.log


Processing HomeController#bp <span class="o">(</span><span class="k">for </span>127.0.0.1 at 2010-06-23 22:19:27<span class="o">)</span> <span class="o">[</span>GET<span class="o">]</span>
Rendering home/bp
Completed in 6ms <span class="o">(</span>View: 5, DB: 0<span class="o">)</span> | 200 OK <span class="o">[</span>http://searchgraph.local/bp<span class="o">]</span>


Processing HomeController#bp <span class="o">(</span><span class="k">for </span>127.0.0.1 at 2010-06-23 22:20:46<span class="o">)</span> <span class="o">[</span>GET<span class="o">]</span>
Rendering home/bp
Completed in 9ms <span class="o">(</span>View: 7, DB: 0<span class="o">)</span> | 200 OK <span class="o">[</span>http://searchgraph.local/bp<span class="o">]</span>
</pre>
</div>


<p>Then if I go open up searchgraph.local, my console window will get updated on
its own</p>

<h2>Copying and pasting from files</h2>


<p>The pbcopy and pbpaste commands copy and paste from your clipboard.</p>

<div class="highlight">
<pre><span class="nv">$ </span><span class="nb">echo test</span> &gt; test.txt

<span class="nv">$ </span>pbcopy &lt; test.txt

<span class="nv">$ </span>pbpaste
<span class="nb">test</span>
</pre>
</div>


<p>And if you want to paste content you have in your clipboard to a file, just
redirect, with</p>

<div class="highlight">
<pre><span class="nv">$ </span>pbpaste &gt; output.txt
</pre>
</div>


<p>That's all for now - I'll write more down as I find them.</p>
</body></html>

</div>

<div class="related post-list">
  <h2>Related Posts</h2>
  <ul class="post-list-ul">
    
      <li>
        <a href="/2011/11/03/meet-doctor-jekyll/">Meet Doctor Jekyll</a>
        <span class='date'>03 November 2011</span>
      </li>
    
      <li>
        <a href="/2011/06/25/complex-asynchronous-queries-in-javascript/">Complex Asynchronous Queries in JavaScript</a>
        <span class='date'>25 June 2011</span>
      </li>
    
      <li>
        <a href="/2011/01/12/hacker-cup-qualification-round-solutions/">Hacker Cup Qualification Round - Solutions</a>
        <span class='date'>12 January 2011</span>
      </li>
    
      <li>
        <a href="/2010/11/17/mechanize-and-uwace-downloader/">Mechanize and UWAce Downloader</a>
        <span class='date'>17 November 2010</span>
      </li>
    
      <li>
        <a href="/2010/10/16/dfas-and-graphviz-dot/">DFAs and Graphviz DOT</a>
        <span class='date'>16 October 2010</span>
      </li>
    
  </ul>
</div>


</div>

        </div>
      </div>
    </div>

    
    <!-- google analytics async -->
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(["_setAccount", "UA-11869199-1"]);
      _gaq.push(["_trackPageview"]);
      (function() {
        var ga = document.createElement("script"); ga.type = "text/javascript"; ga.async = true;
        ga.src = ("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js";
        var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    
  </body>
</html>
