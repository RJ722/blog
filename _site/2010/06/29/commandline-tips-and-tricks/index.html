<!DOCTYPE html>
<html>
  <head>
    <title>Commandline Tips and Tricks - Zero Wind :: Jamie Wong</title>
    
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link rel="stylesheet" media="screen" href="/stylesheets/screen.css" type="text/css" />
    
    
  </head>

  <body class="bp">
    <div class="page-container">
      <div class="page-sidebar">

        <div class="zero-wind">
          <a href="/"><h1 class="site-title">
            Zero Wind
          </h1></a>
        </div>

        <h2 class='my-name'>Jamie Wong</h2>

        <div class="page-nav">
          <ul>
            <li><a href="/">blog</a></li>
            <li><a href="/resume">resume</a></li>
            <li><a href="https://github.com/phleet">github</a></li>
            <li><a href="http://stackoverflow.com/users/303911/jamie-wong">stack overflow</a></li>
          </ul>
        </div>
      </div>

      <div class="page-content">
        <h1>Commandline Tips and Tricks</h1>
        <div class="postdate">Posted on 29 Jun 2010</div>

<div class="post">
<p>Alas, I have been stricken with the plague of half-finished posts and projects. But, as I feel the need to have at least one post per month, here's some stuff you might find useful.</p>

<p>I forget where I discovered this, but <a href="http://www.commandlinefu.com/commands/browse/sort-by-votes">commandlinefu.com</a> is an awesome site.</p>

<p>It's so awesome in fact, that I think the productivity gains I've gotten from it <strong>almost</strong> outweigh the time I wasted looking through the site and testing it.</p>

<p>Here are some of the more useful ones from the site and a few I learned at work and elsewhere.</p>

<p>In all the examples below, the stuff inside [ ]'s is my current working directory. It's the result of my .bash_profile command</p>

<pre class='cmd'>
export PS1="\[\e]2;Jamie@Local \a\e[32;1m\] 
\033[1;32m  [\W]  \033[1;34;40m\033[1;32;0m"
</pre>


<p>And yes, I have been spending a lot of time on <a href="http://stackoverflow.com/users/303911/jamie-wong">Stack Overflow</a>.</p>

<h2>Change to previous working directory</h2>


<p>From: <a href="http://www.commandlinefu.com/commands/view/51/change-to-the-previous-working-directory">Change to the previous working directory @ commandlinefu.com</a></p>



<pre class="cmd">
  [stackoverflow]  pwd
/Users/jamiewong/code/stackoverflow

  [stackoverflow]  cd /usr/bin

  [bin]  pwd
/usr/bin

  [bin]  cd -
/Users/jamiewong/code/stackoverflow

  [stackoverflow]  pwd
/Users/jamiewong/code/stackoverflow

</pre>


<h2>Rerun the last command</h2>


<p>From: <a href="http://www.commandlinefu.com/commands/view/1189/run-the-previous-command-with-sudo">Run the previous command with sudo @ commandlinefu.com</a></p>

<pre class='cmd'>
  [stackoverflow]  echo hello
hello
 
  [stackoverflow]  !!
echo hello
hello
</pre>


<pre class='cmd'>
  [stackoverflow]  ln -s some_script.sh /usr/bin/some_script
ln: /usr/bin/some_script: Permission denied
 
  [stackoverflow]  sudo !!
sudo ln -s some_script.sh /usr/bin/some_script
 
  [stackoverflow]  ls -l /usr/bin/some_script
lrwxr-xr-x  1 root  wheel  14 30 Jun 00:44 /usr/bin/some_script -> some_script.sh
</pre>


<pre class='cmd'>
  [stackoverflow]  cat /etc/apache2/passenger_pane_vhosts/searchgraph* 
&lt;VirtualHost *:80&gt;
  ServerName searchgraph.local
  DocumentRoot &quot;/Users/jamiewong/Code/searchgraph/public&quot;
  RailsEnv development
  &lt;Directory &quot;/Users/jamiewong/Code/searchgraph/public&quot;&gt;
    Order allow,deny
    Allow from all
  &lt;/Directory&gt;
&lt;/VirtualHost&gt; 
  [stackoverflow]  echo &quot;!!&quot;
echo &quot;cat /etc/apache2/passenger_pane_vhosts/searchgraph* &quot;
cat /etc/apache2/passenger_pane_vhosts/searchgraph.local.vhost.conf
</pre>




<h2>Modify the last command and run it</h2>


<p>From: <a href="http://www.commandlinefu.com/commands/view/19/runs-previous-command-but-replacing">Runs the previous command but replacing @ commandlinefu.com</a></p>

<pre class="cmd">
  [stackoverflow]  echo hello world
hello world

  [stackoverflow]  ^world^friends
echo hello friends
hello friends
</pre>


<pre class="cmd">
  [stackoverflow]  ls *.php
bolding.php shd.php     stream.php
 
  [stackoverflow]  ^php^rb
ls *.rb
hms.rb           split_orderby.rb
 </pre>


<pre class="cmd">
  [stackoverflow]  cds ..
-bash: cds: command not found
 
  [stackoverflow]  ^s
cd ..
 
  [code]  
</pre>




<h2>List your last n commands</h2>


<pre class='cmd'>
  [stackoverflow]  history 10
  522  locate mysqld
  523  sudo /Library/StartupItems/MySQLCOM/MySQLCOM start
  524  sudo /Library/PreferencePanes/MySQL.prefPane/Contents/MacOS/MySQL
  525  sudo mysqld_safe
  526  sudo /usr/local/mysql/bin/mysqld_safe
  527  mysql
  528  history
  529  history | awk '{a[$2]++}END{for(i in a){print a[i] " " i}}' | sort -rn | head
  530  history
  531  history 10
</pre>


<h2>Edit and run a previous command</h2>


<p>From: <a href="http://www.commandlinefu.com/commands/view/1561/edit-the-last-or-previous-command-line-in-an-editor-then-execute">Edit the last command line in an editor then execute @ commandlinefu.com</a>
This one requires a bit of explanation. The fc command will, by default, open your last command in the console editor you specify (emacs by default - yuck). If you want it to be vim (yay!), stick this in your .bash_profile to just run it when you want to use it.</p>

<pre class='cmd'>
export EDITOR=vim
</pre>


<p>Then run fc, and it will open up your editor with your last command in it. Save and exit (:wq) to run that command.
If you just want to execute it immediately, use fc -s.</p>

<pre class='cmd'>
  [stackoverflow]  history 5
   86  cat /etc/apache2/passenger_pane_vhosts/searchgraph.local.vhost.conf 
   87  echo "cat /etc/apache2/passenger_pane_vhosts/searchgraph.local.vhost.conf "
   88  history 10
   89  echo "cat /etc/apache2/passenger_pane_vhosts/searchgraph.local.vhost.conf "
   90  history 5
 
  [stackoverflow]  fc -s 87
echo "cat /etc/apache2/passenger_pane_vhosts/searchgraph.local.vhost.conf "
cat /etc/apache2/passenger_pane_vhosts/searchgraph.local.vhost.conf 
</pre>


<p>If you don't care to look up the history number but happen to remember that it was the command you executed two lines ago, you can use negative history numbers</p>

<pre class='cmd'>
  [stackoverflow]  echo hello
hello
 
  [stackoverflow]  echo world
world
 
  [stackoverflow]  fc -s -2
echo hello
hello
</pre>


<h2>Follow new output to a log</h2>


<p>This one comes from my coworkers</p>

<pre class='cmd'>
  [stackoverflow]  tail -f ~/code/searchgraph/log/development.log 


Processing HomeController#bp (for 127.0.0.1 at 2010-06-23 22:19:27) [GET]
Rendering home/bp
Completed in 6ms (View: 5, DB: 0) | 200 OK [http://searchgraph.local/bp]


Processing HomeController#bp (for 127.0.0.1 at 2010-06-23 22:20:46) [GET]
Rendering home/bp
Completed in 9ms (View: 7, DB: 0) | 200 OK [http://searchgraph.local/bp]
</pre>


<p>Then if I go open up searchgraph.local, my console window will get updated on its own</p>

<h2>Copying and pasting from files</h2>


<p>The pbcopy and pbpaste commands copy and paste from your clipboard.</p>

<pre class='cmd'>
  [stackoverflow]  echo test &gt; test.txt
 
  [stackoverflow]  pbcopy &lt; test.txt
 
  [stackoverflow]  pbpaste
test
</pre>


<p>And if you want to paste content you have in your clipboard to a file, just redirect, with</p>

<pre class='cmd'>
pbpaste > output.txt
</pre>


<p>That's all for now - I'll write more down as I find them.</p>

</div>
 
<div id="related">
  <h2>Related Posts</h2>
  <ul class="posts">
    
      <li><span>25 Jun 2011</span> - <a href="/2011/06/25/complex-asynchronous-queries-in-javascript/">Complex Asynchronous Queries in JavaScript</a></li>
    
      <li><span>12 Jan 2011</span> - <a href="/2011/01/12/hacker-cup-qualification-round-solutions/">Hacker Cup Qualification Round - Solutions</a></li>
    
      <li><span>17 Nov 2010</span> - <a href="/2010/11/17/mechanize-and-uwace-downloader/">Mechanize and UWAce Downloader</a></li>
    
      <li><span>16 Oct 2010</span> - <a href="/2010/10/16/dfas-and-graphviz-dot/">DFAs and Graphviz DOT</a></li>
    
      <li><span>30 Sep 2010</span> - <a href="/2010/09/30/make-your-life-easier-with-gnu-make/">Make your life easier with GNU Make.</a></li>
    
  </ul>
</div>


</div>
      </div>

      <div class="clear">
    </div>
  </body>
</html>
